from src.bot.database.db import get_db_pool


async def get_start_message() -> str:
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –ë–î."""
    pool = get_db_pool()
    async with pool.acquire() as conn:
        row = await conn.fetchrow("SELECT text FROM start_message WHERE id = 1")
        if row:
            return row["text"]
        # –ï—Å–ª–∏ –Ω–µ—Ç –≤ –ë–î, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ
        return (
            "–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ –æ—Ü–µ–Ω–∫–∏ –∏ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂\n"
            "–∫–æ–º–ø–∞–Ω–∏–∏ FRESH  —ç—Ç–æ –ª–∏–¥–µ—Ä—ã –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤!\n\n"
            "‚úä–ò–≥—Ä–∞—é—â–∏–π —Ç—Ä–µ–Ω–µ—Ä\n"
            "‚úä–õ—É—á—à–∏–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç\n"
            "‚úä–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ø—Ä–æ–¥—É–∫—Ç—É\n"
            "‚úä–ù–∞—Å—Ç–∞–≤–Ω–∏–∫\n"
            "‚úä–ò—Å–∫–∞—Ç–µ–ª—å –∫–∞–¥—Ä–æ–≤\n"
            "‚úä–ü—Å–∏—Ö–æ–ª–æ–≥ –∏ –º–æ—Ç–∏–≤–∞—Ç–æ—Ä\n\n"
            "–ù–æ –¥–∞–∂–µ —Å–∏–ª—å–Ω–æ–º—É –ª–∏–¥–µ—Ä—É –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—É, –ø–æ—Ä–æ–π\n"
            "–Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞!\n"
            "–ü–æ—ç—Ç–æ–º—É –º—ã —Å–æ–∑–¥–∞–ª–∏ —ç—Ç–æ–≥–æ FRESHBOT–∞, –∫–æ—Ç–æ—Ä—ã–π\n"
            "–ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –≤ –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å –∫–æ–º–∞–Ω–¥–æ–π,\n"
            "—Ü–µ–ª—è–º–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏! üòâ"
        )


async def update_start_message(new_text: str) -> bool:
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ë–î."""
    pool = get_db_pool()
    async with pool.acquire() as conn:
        result = await conn.execute(
            "UPDATE start_message SET text = $1, updated_at = CURRENT_TIMESTAMP WHERE id = 1",
            new_text
        )
        return result == "UPDATE 1"

